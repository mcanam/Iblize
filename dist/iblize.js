/*!
 * iblize v2.0.0
 * Simple Javascript Code Editor Library
 * https://github.com/mcanam/iblize
 * MIT license by mcanam
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Iblize=t()}(this,(function(){"use strict";var e=[],t=[];!function(a,n){if(a&&"undefined"!=typeof document){var s,i=!0===n.prepend?"prepend":"append",r=!0===n.singleTag,l="string"==typeof n.container?document.querySelector(n.container):document.getElementsByTagName("head")[0];if(r){var o=e.indexOf(l);-1===o&&(o=e.push(l)-1,t[o]={}),s=t[o]&&t[o][i]?t[o][i]:t[o][i]=c()}else s=c();65279===a.charCodeAt(0)&&(a=a.substring(1)),s.styleSheet?s.styleSheet.cssText+=a:s.appendChild(document.createTextNode(a))}function c(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),n.attributes)for(var t=Object.keys(n.attributes),a=0;a<t.length;a++)e.setAttribute(t[a],n.attributes[t[a]]);var s="prepend"===i?"afterbegin":"beforeend";return l.insertAdjacentElement(s,e),e}}(".iblize{font:14px/1.75 Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;color:#3d525c;width:100%;height:100%;display:flex;position:relative;overflow:hidden}.iblize,.iblize *{box-sizing:border-box}.iblize *{font:inherit}.iblize_linenumber{display:flex;flex-direction:column}.iblize_linenumber_child{text-align:right;width:100%}.iblize_content{flex-grow:1;height:100%;position:relative;overflow:hidden}.iblize_pre,.iblize_textarea{width:100%;height:100%;padding:0;margin:0}.iblize_textarea{color:transparent;caret-color:#3d525c;white-space:pre;border:none;outline:none;background-color:initial;position:relative;z-index:2;resize:none}.iblize_pre{position:absolute;top:0;left:0;pointer-events:none}",{prepend:!0,attributes:{id:"iblize_style"}});var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n={exports:{}};!function(e){var t=function(e){var t=/\blang(?:uage)?-([\w-]+)\b/i,a=0,n={},s={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function e(t){return t instanceof i?new i(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++a}),e.__id},clone:function e(t,a){var n,i;switch(a=a||{},s.util.type(t)){case"Object":if(i=s.util.objId(t),a[i])return a[i];for(var r in n={},a[i]=n,t)t.hasOwnProperty(r)&&(n[r]=e(t[r],a));return n;case"Array":return i=s.util.objId(t),a[i]?a[i]:(n=[],a[i]=n,t.forEach((function(t,s){n[s]=e(t,a)})),n);default:return t}},getLanguage:function(e){for(;e&&!t.test(e.className);)e=e.parentElement;return e?(e.className.match(t)||[,"none"])[1].toLowerCase():"none"},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(n){var e=(/at [^(\r\n]*\((.*):.+:.+\)$/i.exec(n.stack)||[])[1];if(e){var t=document.getElementsByTagName("script");for(var a in t)if(t[a].src==e)return t[a]}return null}},isActive:function(e,t,a){for(var n="no-"+t;e;){var s=e.classList;if(s.contains(t))return!0;if(s.contains(n))return!1;e=e.parentElement}return!!a}},languages:{plain:n,plaintext:n,text:n,txt:n,extend:function(e,t){var a=s.util.clone(s.languages[e]);for(var n in t)a[n]=t[n];return a},insertBefore:function(e,t,a,n){var i=(n=n||s.languages)[e],r={};for(var l in i)if(i.hasOwnProperty(l)){if(l==t)for(var o in a)a.hasOwnProperty(o)&&(r[o]=a[o]);a.hasOwnProperty(l)||(r[l]=i[l])}var c=n[e];return n[e]=r,s.languages.DFS(s.languages,(function(t,a){a===c&&t!=e&&(this[t]=r)})),r},DFS:function e(t,a,n,i){i=i||{};var r=s.util.objId;for(var l in t)if(t.hasOwnProperty(l)){a.call(t,l,t[l],n||l);var o=t[l],c=s.util.type(o);"Object"!==c||i[r(o)]?"Array"!==c||i[r(o)]||(i[r(o)]=!0,e(o,a,l,i)):(i[r(o)]=!0,e(o,a,null,i))}}},plugins:{},highlightAll:function(e,t){s.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,a){var n={callback:a,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};s.hooks.run("before-highlightall",n),n.elements=Array.prototype.slice.apply(n.container.querySelectorAll(n.selector)),s.hooks.run("before-all-elements-highlight",n);for(var i,r=0;i=n.elements[r++];)s.highlightElement(i,!0===t,n.callback)},highlightElement:function(a,n,i){var r=s.util.getLanguage(a),l=s.languages[r];a.className=a.className.replace(t,"").replace(/\s+/g," ")+" language-"+r;var o=a.parentElement;o&&"pre"===o.nodeName.toLowerCase()&&(o.className=o.className.replace(t,"").replace(/\s+/g," ")+" language-"+r);var c={element:a,language:r,grammar:l,code:a.textContent};function u(e){c.highlightedCode=e,s.hooks.run("before-insert",c),c.element.innerHTML=c.highlightedCode,s.hooks.run("after-highlight",c),s.hooks.run("complete",c),i&&i.call(c.element)}if(s.hooks.run("before-sanity-check",c),(o=c.element.parentElement)&&"pre"===o.nodeName.toLowerCase()&&!o.hasAttribute("tabindex")&&o.setAttribute("tabindex","0"),!c.code)return s.hooks.run("complete",c),void(i&&i.call(c.element));if(s.hooks.run("before-highlight",c),c.grammar)if(n&&e.Worker){var p=new Worker(s.filename);p.onmessage=function(e){u(e.data)},p.postMessage(JSON.stringify({language:c.language,code:c.code,immediateClose:!0}))}else u(s.highlight(c.code,c.grammar,c.language));else u(s.util.encode(c.code))},highlight:function(e,t,a){var n={code:e,grammar:t,language:a};return s.hooks.run("before-tokenize",n),n.tokens=s.tokenize(n.code,n.grammar),s.hooks.run("after-tokenize",n),i.stringify(s.util.encode(n.tokens),n.language)},tokenize:function(e,t){var a=t.rest;if(a){for(var n in a)t[n]=a[n];delete t.rest}var s=new o;return c(s,s.head,e),l(e,s,t,s.head,0),function(e){var t=[],a=e.head.next;for(;a!==e.tail;)t.push(a.value),a=a.next;return t}(s)},hooks:{all:{},add:function(e,t){var a=s.hooks.all;a[e]=a[e]||[],a[e].push(t)},run:function(e,t){var a=s.hooks.all[e];if(a&&a.length)for(var n,i=0;n=a[i++];)n(t)}},Token:i};function i(e,t,a,n){this.type=e,this.content=t,this.alias=a,this.length=0|(n||"").length}function r(e,t,a,n){e.lastIndex=t;var s=e.exec(a);if(s&&n&&s[1]){var i=s[1].length;s.index+=i,s[0]=s[0].slice(i)}return s}function l(e,t,a,n,o,p){for(var h in a)if(a.hasOwnProperty(h)&&a[h]){var d=a[h];d=Array.isArray(d)?d:[d];for(var g=0;g<d.length;++g){if(p&&p.cause==h+","+g)return;var m=d[g],f=m.inside,b=!!m.lookbehind,v=!!m.greedy,y=m.alias;if(v&&!m.pattern.global){var k=m.pattern.toString().match(/[imsuy]*$/)[0];m.pattern=RegExp(m.pattern.source,k+"g")}for(var x=m.pattern||m,w=n.next,F=o;w!==t.tail&&!(p&&F>=p.reach);F+=w.value.length,w=w.next){var A=w.value;if(t.length>e.length)return;if(!(A instanceof i)){var j,E=1;if(v){if(!(j=r(x,F,e,b)))break;var S=j.index,T=j.index+j[0].length,C=F;for(C+=w.value.length;S>=C;)C+=(w=w.next).value.length;if(F=C-=w.value.length,w.value instanceof i)continue;for(var $=w;$!==t.tail&&(C<T||"string"==typeof $.value);$=$.next)E++,C+=$.value.length;E--,A=e.slice(F,C),j.index-=F}else if(!(j=r(x,0,A,b)))continue;S=j.index;var z=j[0],_=A.slice(0,S),L=A.slice(S+z.length),O=F+A.length;p&&O>p.reach&&(p.reach=O);var q=w.prev;if(_&&(q=c(t,q,_),F+=_.length),u(t,q,E),w=c(t,q,new i(h,f?s.tokenize(z,f):z,y,z)),L&&c(t,w,L),E>1){var N={cause:h+","+g,reach:O};l(e,t,a,w.prev,F,N),p&&N.reach>p.reach&&(p.reach=N.reach)}}}}}}function o(){var e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0}function c(e,t,a){var n=t.next,s={value:a,prev:t,next:n};return t.next=s,n.prev=s,e.length++,s}function u(e,t,a){for(var n=t.next,s=0;s<a&&n!==e.tail;s++)n=n.next;t.next=n,n.prev=t,e.length-=s}if(e.Prism=s,i.stringify=function e(t,a){if("string"==typeof t)return t;if(Array.isArray(t)){var n="";return t.forEach((function(t){n+=e(t,a)})),n}var i={type:t.type,content:e(t.content,a),tag:"span",classes:["token",t.type],attributes:{},language:a},r=t.alias;r&&(Array.isArray(r)?Array.prototype.push.apply(i.classes,r):i.classes.push(r)),s.hooks.run("wrap",i);var l="";for(var o in i.attributes)l+=" "+o+'="'+(i.attributes[o]||"").replace(/"/g,"&quot;")+'"';return"<"+i.tag+' class="'+i.classes.join(" ")+'"'+l+">"+i.content+"</"+i.tag+">"},!e.document)return e.addEventListener?(s.disableWorkerMessageHandler||e.addEventListener("message",(function(t){var a=JSON.parse(t.data),n=a.language,i=a.code,r=a.immediateClose;e.postMessage(s.highlight(i,s.languages[n],n)),r&&e.close()}),!1),s):s;var p=s.util.currentScript();function h(){s.manual||s.highlightAll()}if(p&&(s.filename=p.src,p.hasAttribute("data-manual")&&(s.manual=!0)),!s.manual){var d=document.readyState;"loading"===d||"interactive"===d&&p&&p.defer?document.addEventListener("DOMContentLoaded",h):window.requestAnimationFrame?window.requestAnimationFrame(h):window.setTimeout(h,16)}return s}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});
/**
       * Prism: Lightweight, robust, elegant syntax highlighting
       *
       * @license MIT <https://opensource.org/licenses/MIT>
       * @author Lea Verou <https://lea.verou.me>
       * @namespace
       * @public
       */e.exports&&(e.exports=t),void 0!==a&&(a.Prism=t),t.languages.markup={comment:/<!--[\s\S]*?-->/,prolog:/<\?[\s\S]+?\?>/,doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/,name:/[^\s<>'"]+/}},cdata:/<!\[CDATA\[[\s\S]*?\]\]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},t.languages.markup.tag.inside["attr-value"].inside.entity=t.languages.markup.entity,t.languages.markup.doctype.inside["internal-subset"].inside=t.languages.markup,t.hooks.add("wrap",(function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))})),Object.defineProperty(t.languages.markup.tag,"addInlined",{value:function(e,a){var n={};n["language-"+a]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:t.languages[a]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};s["language-"+a]={pattern:/[\s\S]+/,inside:t.languages[a]};var i={};i[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,(function(){return e})),"i"),lookbehind:!0,greedy:!0,inside:s},t.languages.insertBefore("markup","cdata",i)}}),Object.defineProperty(t.languages.markup.tag,"addAttribute",{value:function(e,a){t.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:t.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,t.languages.xml=t.languages.extend("markup",{}),t.languages.ssml=t.languages.xml,t.languages.atom=t.languages.xml,t.languages.rss=t.languages.xml,function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var a=e.languages.markup;a&&(a.tag.addInlined("style","css"),a.tag.addAttribute("style","css"))}(t),t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|interface|extends|implements|trait|instanceof|new)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},t.languages.javascript=t.languages.extend("clike",{"class-name":[t.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:prototype|constructor))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:/\b(?:(?:0[xX](?:[\dA-Fa-f](?:_[\dA-Fa-f])?)+|0[bB](?:[01](?:_[01])?)+|0[oO](?:[0-7](?:_[0-7])?)+)n?|(?:\d(?:_\d)?)+n|NaN|Infinity)\b|(?:\b(?:\d(?:_\d)?)+\.?(?:\d(?:_\d)?)*|\B\.(?:\d(?:_\d)?)+)(?:[Ee][+-]?(?:\d(?:_\d)?)+)?/,operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),t.languages.javascript["class-name"][0].pattern=/(\b(?:class|interface|extends|implements|instanceof|new)\s+)[\w.\\]+/,t.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)\/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/,lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:t.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:t.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:t.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:t.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:t.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),t.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:t.languages.javascript}},string:/[\s\S]+/}}}),t.languages.markup&&(t.languages.markup.tag.addInlined("script","javascript"),t.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),t.languages.js=t.languages.javascript,function(){if(void 0!==t&&"undefined"!=typeof document){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var e={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},a="data-src-status",n="loading",s="loaded",i='pre[data-src]:not([data-src-status="loaded"]):not([data-src-status="loading"])',r=/\blang(?:uage)?-([\w-]+)\b/i;t.hooks.add("before-highlightall",(function(e){e.selector+=", "+i})),t.hooks.add("before-sanity-check",(function(r){var l=r.element;if(l.matches(i)){r.code="",l.setAttribute(a,n);var c=l.appendChild(document.createElement("CODE"));c.textContent="Loading…";var u=l.getAttribute("data-src"),p=r.language;if("none"===p){var h=(/\.(\w+)$/.exec(u)||[,"none"])[1];p=e[h]||h}o(c,p),o(l,p);var d=t.plugins.autoloader;d&&d.loadLanguages(p);var g=new XMLHttpRequest;g.open("GET",u,!0),g.onreadystatechange=function(){var e,n;4==g.readyState&&(g.status<400&&g.responseText?(l.setAttribute(a,s),c.textContent=g.responseText,t.highlightElement(c)):(l.setAttribute(a,"failed"),g.status>=400?c.textContent=(e=g.status,n=g.statusText,"✖ Error "+e+" while fetching file: "+n):c.textContent="✖ Error: File does not exist or is empty"))},g.send(null)}})),t.plugins.fileHighlight={highlight:function(e){for(var a,n=(e||document).querySelectorAll(i),s=0;a=n[s++];)t.highlightElement(a)}};var l=!1;t.fileHighlight=function(){l||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),l=!0),t.plugins.fileHighlight.highlight.apply(this,arguments)}}function o(e,t){var a=e.className;a=a.replace(r," ")+" language-"+t,e.className=a.replace(/\s+/g," ").trim()}}()}(n);var s=n.exports;class i{static select(e){return document.querySelector(e)}static selectAll(e){return document.querySelectorAll(e)}static create(e,t){const a=document.createElement(e);return Object.entries(t).forEach((([e,t])=>"attr"==e?this.setAttr(a,t):"style"==e?this.addStyle(a,t):"event"==e?this.addEvent(a,t):"parent"==e?t.appendChild(a):void(a[e]=t))),a}static setAttr(e,t){return Object.entries(t).forEach((([t,a])=>{e.setAttribute(t,a)})),this}static addStyle(e,t){return Object.entries(t).forEach((([t,a])=>{e.style[t]=a})),this}static addEvent(e,t){return Array.isArray(t)||(t=[t]),t.forEach((({name:t,callback:a})=>{e.addEventListener(t,a)})),this}}class r{constructor(e){this.editor=e,this.stack=[],this.level=0,this.record(0,"")}record(e,t){this.stack.length>1e3&&this.stack.shift();const{stringify:a}=JSON,n={cursor:e,value:t};a(this.stack.slice(-1)[0])!=a(n)&&this.stack.push(n),this.level=this.stack.length-1}undo(){this.level>0&&(this.level-=1,this.restore())}redo(){this.level<this.stack.length-1&&(this.level+=1,this.restore())}restore(){const{cursor:e,value:t}=this.stack[this.level];this.editor.setValue(t,!1),this.editor.setCursor(e)}}const l={require:{javascript:"clike",actionscript:"javascript",apex:["clike","sql"],arduino:"cpp",aspnet:["markup","csharp"],birb:"clike",bison:"c",c:"clike",csharp:"clike",cpp:"c",cfscript:"clike",chaiscript:["clike","cpp"],coffeescript:"javascript",crystal:"ruby","css-extras":"css",d:"clike",dart:"clike",django:"markup-templating",ejs:["javascript","markup-templating"],etlua:["lua","markup-templating"],erb:["ruby","markup-templating"],fsharp:"clike","firestore-security-rules":"clike",flow:"javascript",ftl:"markup-templating",gml:"clike",glsl:"c",go:"clike",groovy:"clike",haml:"ruby",handlebars:"markup-templating",haxe:"clike",hlsl:"c",idris:"haskell",java:"clike",javadoc:["markup","java","javadoclike"],jolie:"clike",jsdoc:["javascript","javadoclike","typescript"],"js-extras":"javascript",json5:"json",jsonp:"json","js-templates":"javascript",kotlin:"clike",latte:["clike","markup-templating","php"],less:"css",lilypond:"scheme",liquid:"markup-templating",markdown:"markup","markup-templating":"markup",mongodb:"javascript",n4js:"javascript",objectivec:"c",opencl:"c",parser:"markup",php:"markup-templating",phpdoc:["php","javadoclike"],"php-extras":"php",plsql:"sql",processing:"clike",protobuf:"clike",pug:["markup","javascript"],purebasic:"clike",purescript:"haskell",qsharp:"clike",qml:"javascript",qore:"clike",racket:"scheme",jsx:["markup","javascript"],tsx:["jsx","typescript"],reason:"clike",ruby:"clike",sass:"css",scss:"css",scala:"java","shell-session":"bash",smarty:"markup-templating",solidity:"clike",soy:"markup-templating",sparql:"turtle",sqf:"clike",squirrel:"clike",swift:"clike","t4-cs":["t4-templating","csharp"],"t4-vb":["t4-templating","vbnet"],tap:"yaml",tt2:["clike","markup-templating"],textile:"markup",twig:"markup",typescript:"javascript",v:"clike",vala:"clike",vbnet:"basic",velocity:"markup",wiki:"markup",xeora:"markup","xml-doc":"markup",xquery:"markup"},aliases:{html:"markup",xml:"markup",svg:"markup",mathml:"markup",ssml:"markup",atom:"markup",rss:"markup",js:"javascript",g4:"antlr4",adoc:"asciidoc",shell:"bash",shortcode:"bbcode",rbnf:"bnf",oscript:"bsl",cs:"csharp",dotnet:"csharp",cfc:"cfscript",coffee:"coffeescript",conc:"concurnas",jinja2:"django","dns-zone":"dns-zone-file",dockerfile:"docker",gv:"dot",eta:"ejs",xlsx:"excel-formula",xls:"excel-formula",gamemakerlanguage:"gml",hbs:"handlebars",hs:"haskell",idr:"idris",gitignore:"ignore",hgignore:"ignore",npmignore:"ignore",webmanifest:"json",kt:"kotlin",kts:"kotlin",kum:"kumir",tex:"latex",context:"latex",ly:"lilypond",emacs:"lisp",elisp:"lisp","emacs-lisp":"lisp",md:"markdown",moon:"moonscript",n4jsd:"n4js",nani:"naniscript",objc:"objectivec",qasm:"openqasm",objectpascal:"pascal",px:"pcaxis",pcode:"peoplecode",pq:"powerquery",mscript:"powerquery",pbfasm:"purebasic",purs:"purescript",py:"python",qs:"qsharp",rkt:"racket",rpy:"renpy",robot:"robotframework",rb:"ruby","sh-session":"shell-session",shellsession:"shell-session",smlnj:"sml",sol:"solidity",sln:"solution-file",rq:"sparql",t4:"t4-cs",trig:"turtle",ts:"typescript",tsconfig:"typoscript",uscript:"unrealscript",uc:"unrealscript",url:"uri",vb:"visual-basic",vba:"visual-basic",mathematica:"wolfram",nb:"wolfram",wl:"wolfram",xeoracube:"xeora",yml:"yaml"}};class o{constructor(){this.baseURL="https://unpkg.com/iblize/dist/",this.themes=[]}loadLanguage(e,t,a){const{require:n,aliases:s}=l;if(e in s&&(e=s[e]),e in Prism.languages)return a();function r(e,a=(()=>{})){const n=i.create("script",{parent:document.body,src:t+e+".js",onload:()=>{n.remove(),a()}})}""==t&&(t=this.baseURL+"languages/"),e in n&&(Array.isArray(n[e])||(n[e]=[n[e]]),n[e].forEach((e=>{e in Prism.languages||r(e)}))),r(e,a)}loadTheme(e,t){if(""==t&&(t=this.baseURL+"themes/"),this.themes.includes(e)){return i.select(`link[theme="${e}"]`).href=t+e+".css"}i.select("#iblize_style").after(i.create("link",{rel:"stylesheet",href:t+e+".css",attr:{theme:e}})),this.themes.push(e)}}return class{constructor(e="",t={}){if(this.history=new r(this),this.loader=new o,e instanceof HTMLElement?this.elementRoot=e:this.elementRoot=i.select(e),!this.elementRoot)throw Error("Iblize can't find the editor containers");this.options={language:"javascript",languagesPath:"",lineNumber:!0,readOnly:!1,tabSize:2,theme:"iblize-dark",themesPath:""},this.setupEditor(),this.setValue(null),this.loadTheme(),this.loadLanguage(),this.setOptions(t)}setupEditor(){this.createEditorElement(),this.attachTextareaEvent()}createEditorElement(){this.elementWrapper=i.create("div",{parent:this.elementRoot,className:`iblize ${this.options.theme}`}),this.elementLinenumber=i.create("div",{parent:this.elementWrapper,className:"iblize_linenumber"}),this.elementContent=i.create("div",{parent:this.elementWrapper,className:"iblize_content"}),this.elementPre=i.create("pre",{parent:this.elementContent,className:"iblize_pre"}),this.elementCode=i.create("code",{parent:this.elementPre,className:"iblize_code"}),this.elementTextarea=i.create("textarea",{parent:this.elementContent,className:"iblize_textarea",attr:{spellcheck:"false",autocorrect:"off",autocomplete:"off",autocapitalize:"off"}})}attachTextareaEvent(){i.addEvent(this.elementTextarea,[{name:"input",callback:this.handleInput.bind(this)},{name:"keydown",callback:this.handleKeydown.bind(this)},{name:"scroll",callback:this.handleScroll.bind(this)}])}handleScroll(){const{scrollWidth:e,scrollHeight:t,scrollTop:a,scrollLeft:n}=this.elementTextarea;i.addStyle(this.elementLinenumber,{height:t+"px",transform:`translateY(${-1*a}px)`}),i.addStyle(this.elementPre,{width:e+"px",height:t+"px",transform:`translate(${-1*n}px, ${-1*a}px)`})}handleInput(){null!=this.typingTimeout&&clearTimeout(this.typingTimeout),this.typingTimeout=setTimeout((()=>{this.recordHistory()}),150),null!=this.onUpdateCallback&&this.onUpdateCallback(this.getValue()),this.closeCharacter(),this.updateEditor()}handleKeydown(e){"Tab"==e.key&&(e.preventDefault(),this.insertTab()),13!=e.keyCode&&"Enter"!=e.key||(e.preventDefault(),this.addLineIndent()),e.ctrlKey&&"z"==e.key&&(e.preventDefault(),this.undo()),e.ctrlKey&&e.shiftKey&&"Z"==e.key&&(e.preventDefault(),this.redo())}updateEditor(){this.countLinenumber(),this.highlightSyntax()}countLinenumber(){const e=this.getTotalLine();if(e!=this.elementLinenumber.childElementCount&&this.options.lineNumber){let t="";for(let a=0;a<e;a++)t+=`<span class="iblize_linenumber_child">${a+1}</span>`;this.elementLinenumber.innerHTML=t}}highlightSyntax(){const e=this.getValue();let t=this.options.language,a=s.languages[t];null==a&&(a=s.languages.plaintext);const n=s.highlight(e,a,t);this.elementCode.innerHTML=n}addLineIndent(){const e=this.getCursor(),t=this.getValue(),a=this.getActiveLine(),n=this.getLineValue(a).match(/^\s{1,}/),s=t.charAt(e-1),i=t.charAt(e);let r=null==n?0:n[0].length;if("("==s&&")"==i||"{"==s&&"}"==i||"["==s&&"]"==i||">"==s&&"<"==i){const t=this.options.tabSize,a="\n"+" ".repeat(r+t)+"\n"+" ".repeat(r);this.insertText(e,a,{moveCursor:e+r+t+1,recordHistory:"both"})}else this.insertText(e,"\n"+" ".repeat(r),{moveCursor:e+r+1,recordHistory:"both"})}closeCharacter(){const e=this.getCursor(),t=this.getValue(),a=t.charAt(e-1),n=t.charAt(e),s=[{open:"(",close:")"},{open:"{",close:"}"},{open:"[",close:"]"},{open:"<",close:">"},{open:"'",close:"'"},{open:'"',close:'"'},{open:"`",close:"`"}];if(this.valueLengthReminder||(this.valueLengthReminder=0),t.length>this.valueLengthReminder)s.forEach((t=>{a!=t.close||n!=t.close?a==t.open&&this.insertText(e,t.close,{moveCursor:e}):this.removeText(e,e+1)}));else{const t=this.history.stack.slice(-1)[0].value.charAt(e);s.forEach((a=>{t==a.open&&n==a.close&&this.removeText(e,e+1)}))}this.valueLengthReminder=t.length}valueFromComment(){const e=this.elementRoot,t=NodeFilter.SHOW_COMMENT,a=document.createNodeIterator(e,t).nextNode();return null!=a?a.nodeValue.replace(/\r?\n/,""):""}recordHistory(e={}){null==e.cursor&&(e.cursor=this.getCursor()),null==e.value&&(e.value=this.getValue()),this.history.record(e.cursor,e.value)}optionsValidator(e){Object.entries(e).forEach((e=>{const[t,a]=e;if(!this.options.hasOwnProperty(t))throw Error(`Invalid Iblize option! unknown option {${t}}`);const n=typeof this.options[t];if(typeof a!=n)throw Error(`Invalid Iblize option! {${t}} value must be a ${n}`)}))}loadLanguage(){const e=this.options.language,t=this.options.languagesPath,a=this.highlightSyntax;this.loader.loadLanguage(e,t,a.bind(this))}loadTheme(){const e=this.options.theme,t=this.options.themesPath;this.loader.loadTheme(e,t)}onUpdate(e){if("function"!=typeof e)throw Error("Invalid `onUpdate()` callback parameter! callback must be a function.");this.onUpdateCallback=e}getValue(e=null,t=null){const a=this.elementTextarea.value;return null!=e&&null!=t?a.substring(e,t):null!=e&&null==t?a.substring(e):a}setValue(e,t=!0){this.elementTextarea.value=null!=e?e:this.valueFromComment(),this.updateEditor(),t&&this.recordHistory()}getOptions(){return this.options}setOptions(e){this.optionsValidator(e),Object.assign(this.options,e),null==e.theme&&null==e.themesPath||(this.elementWrapper.className=`iblize ${this.options.theme}`,this.loadTheme()),null==e.language&&null==e.languagesPath||this.loadLanguage(),null!=e.readOnly&&(this.elementTextarea.readOnly=this.options.readOnly),null!=e.lineNumber&&(this.elementLinenumber.style.display=this.options.lineNumber?"":"none")}getSelection(){const{selectionStart:e,selectionEnd:t,selectionDirection:a}=this.elementTextarea;return{start:e,end:t,dir:a}}setSelection(e,t,a="none"){this.elementTextarea.setSelectionRange(e,t,a)}getCursor(){return this.getSelection().start}setCursor(e){this.setSelection(e,e)}getActiveLine(){const e=this.getCursor();return this.getValue(0,e).split("\n").length}getTotalLine(){return this.getValue().split("\n").length}getLineValue(e){return this.getValue().split("\n")[e-1]}insertTab(){const e=this.getCursor(),t=this.options.tabSize;this.insertText(e," ".repeat(t),{recordHistory:"both"})}insertText(e,t,a={}){const n=this.getValue(0,e),s=this.getValue(e);let i=a.recordHistory||"after",r=a.moveCursor||e+t.length;"before"!=i&&"both"!=i||this.recordHistory(),this.setValue(n+t+s,!1),this.setCursor(r),"after"!=i&&"both"!=i||this.recordHistory()}removeText(e,t,a={}){const n=this.getValue(0,e),s=this.getValue(t);let i=a.recordHistory||"after",r=a.moveCursor||e;"before"!=i&&"both"!=i||this.recordHistory(),this.setValue(n+s,!1),this.setCursor(r),"after"!=i&&"both"!=i||this.recordHistory()}undo(){this.history.undo()}redo(){this.history.redo()}}}));
//# sourceMappingURL=iblize.js.map
